{"version":3,"sources":["../../src/middleware/authMiddleware.js"],"names":["TOKENTIME","SECRET","authenticate","secret","generateAccessToken","req","res","next","token","sign","id","user","expiresIn","respond","console","log","status","json","username","_id","name","module","exports"],"mappings":";;AAAA;;;;AACA;;;;;;AAEA,IAAMA,YAAY,KAAG,EAAH,GAAM,EAAN,GAAS,EAA3B,C,CAA+B;AAC/B,IAAMC,SAAS,6BAAf;;AAEA,IAAIC,eAAe,0BAAW,EAAEC,QAAQF,MAAV,EAAX,CAAnB;;AAEA,IAAIG,sBAAsB,SAAtBA,mBAAsB,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAC5CF,MAAIG,KAAJ,GAAYH,IAAIG,KAAJ,IAAa,EAAzB;AACAH,MAAIG,KAAJ,GAAY,uBAAIC,IAAJ,CAAS;AACnBC,QAAIL,IAAIM,IAAJ,CAASD;AADM,GAAT,EAEPT,MAFO,EAEC;AACTW,eAAWZ;AADF,GAFD,CAAZ;AAKEO;AACH,CARD;;AAUA,IAAIM,UAAU,SAAVA,OAAU,CAACR,GAAD,EAAMC,GAAN,EAAc;AAC1BQ,UAAQC,GAAR,CAAYV,IAAIM,IAAhB;AACAL,MAAIU,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACnBN,UAAMN,IAAIM,IAAJ,CAASO,QADI;AAEnBR,QAAIL,IAAIM,IAAJ,CAASQ,GAFM;AAGnBC,UAAKf,IAAIM,IAAJ,CAASS,IAHK;AAInBZ,WAAOH,IAAIG;AAJQ,GAArB;AAMD,CARD;;AAUAa,OAAOC,OAAP,GAAiB;AACfpB,4BADe;AAEfE,0CAFe;AAGfS;AAHe,CAAjB","file":"authMiddleware.js","sourcesContent":["import jwt from 'jsonwebtoken';\nimport expressJwt from 'express-jwt';\n\nconst TOKENTIME = 60*60*24*30; //30 days\nconst SECRET = \"w3 Havf rereg ergerg 34t34t\";\n\nlet authenticate = expressJwt({ secret: SECRET});\n\nlet generateAccessToken = (req, res, next) => {\n  req.token = req.token || {};\n  req.token = jwt.sign({\n    id: req.user.id,\n    }, SECRET, { \n      expiresIn: TOKENTIME\n    });\n    next()\n}\n\nlet respond = (req, res) => {\n  console.log(req.user)\n  res.status(200).json({\n    user: req.user.username,\n    id: req.user._id,\n    name:req.user.name,\n    token: req.token\n  });\n}\n\nmodule.exports = {\n  authenticate,\n  generateAccessToken,\n  respond\n}\n\n\n"]}